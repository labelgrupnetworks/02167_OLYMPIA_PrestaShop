/* =============================================================
 * bootstrap3-typeahead.js v3.1.0
 * https://github.com/bassjobsen/Bootstrap-3-Typeahead
 * =============================================================
 * Original written by @mdo and @fat
 * =============================================================
 * Copyright 2014 Bass Jobsen @bassjobsen
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):t(e.jQuery)}(this,function(e){"use strict";var t=function(t,s){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,s),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=e(this.options.menu),this.$appendTo=this.options.appendTo?e(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1,this.forceSelection="boolean"==typeof this.options.forceSelection&&this.options.forceSelection};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").data("value");if(this.$element.data("active",e),this.autoSelect||e){var t=this.updater(e);t||(t=""),this.$element.val(this.displayText(t)||t).change(),this.afterSelect(t)}return this.forceSelection&&this.$element.data("selected",!0),this.hide()},updater:function(e){return e},setSource:function(e){this.source=e},show:function(){var t,s=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return t="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,(this.shown?this.$menu:this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element)).css({top:s.top+s.height+t,left:s.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){if(this.query=null!=t?t:this.$element.val()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var s=e.proxy(function(){e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(s,this.delay)},process:function(t){var s=this;return t=e.grep(t,function(e){return s.matcher(e)}),(t=this.sorter(t)).length||this.options.addItem?(t.length>0?this.$element.data("active",t[0]):this.$element.data("active",null),this.options.addItem&&t.push(this.options.addItem),"all"==this.options.items?this.render(t).show():this.render(t.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(e){return~this.displayText(e).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,s=[],i=[],o=[];t=e.shift();){var n=this.displayText(t);n.toLowerCase().indexOf(this.query.toLowerCase())?~n.indexOf(this.query)?i.push(t):o.push(t):s.push(t)}return s.concat(i,o)},highlighter:function(t){var s,i,o,n,h,r=e("<div></div>"),a=this.query,u=t.toLowerCase().indexOf(a.toLowerCase());if(0===(s=a.length))return r.text(t).html();for(;u>-1;)i=t.substr(0,u),o=t.substr(u,s),n=t.substr(u+s),h=e("<strong></strong>").text(o),r.append(document.createTextNode(i)).append(h),u=(t=n).toLowerCase().indexOf(a.toLowerCase());return r.append(document.createTextNode(t)).html()},render:function(t){var s=this,i=this,o=!1,n=[],h=s.options.separator;return e.each(t,function(e,s){e>0&&s[h]!==t[e-1][h]&&n.push({__type:"divider"}),!s[h]||0!==e&&s[h]===t[e-1][h]||n.push({__type:"category",name:s[h]}),n.push(s)}),t=e(n).map(function(t,n){if("category"==(n.__type||!1))return e(s.options.headerHtml).text(n.name)[0];if("divider"==(n.__type||!1))return e(s.options.headerDivider)[0];var h=i.displayText(n);return(t=e(s.options.item).data("value",n)).find("a").html(s.highlighter(h,n)),h==i.$element.val()&&(t.addClass("active"),i.$element.data("active",n),o=!0),t[0]}),this.autoSelect&&!o&&(t.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",t.first().data("value"))),this.$menu.html(t),this},displayText:function(e){return void 0!==e&&void 0!==e.name&&e.name||e},next:function(t){var s=this.$menu.find(".active").removeClass("active").next();s.length||(s=e(this.$menu.find("li")[0])),s.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active").prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("input",e.proxy(this.input,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this)).on("mousedown",e.proxy(this.mousedown,this))},mousedown:function(e){this.mouseddown=!0,e.stopPropagation(),e.preventDefault()},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown)switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault(),this.next()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.shown||40!=t.keyCode?this.move(t):this.lookup()},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},input:function(e){this.lookup(),e.preventDefault()},keyup:function(e){switch(this.$element.removeData("selected"),e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide()}e.preventDefault()},focus:function(e){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup())},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&(this.mouseddown&&e.originalEvent?this.mouseddown=!1:this.hide()),this.forceSelection&&this.emptySelection()&&(this.$element.val(""),this.$element.focus())},click:function(e){e.preventDefault(),this.select(),this.$element.focus(),this.hide()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1},emptySelection:function(){return""===this.$element.val()||null===this.$element.val()||!this.$element.data("selected")}};var s=e.fn.typeahead;e.fn.typeahead=function(s){var i=arguments;return"string"==typeof s&&"getActive"==s?this.data("active"):"string"==typeof s&&"isSelected"==s?this.data("selected"):this.each(function(){var o=e(this),n=o.data("typeahead"),h="object"==typeof s&&s;n||o.data("typeahead",n=new t(this,h)),"string"==typeof s&&n[s]&&(i.length>1?n[s].apply(n,Array.prototype.slice.call(i,1)):n[s]())})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="javascript:void(0)" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:e.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=s,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var s=e(this);s.data("typeahead")||s.typeahead(s.data())})});